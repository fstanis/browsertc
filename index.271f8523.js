var e,t,a,n,i,r,o,s,l,c,u,_,h,d,p={},f=[],m=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,g=Array.isArray;function b(e,t){for(var a in t)e[a]=t[a];return e}function v(e){var t=e.parentNode;t&&t.removeChild(e)}function y(e,t,a){var n,i,r,o={};for(r in t)"key"==r?n=t[r]:"ref"==r?i=t[r]:o[r]=t[r];if(arguments.length>2&&(o.children=arguments.length>3?s.call(arguments,2):a),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===o[r]&&(o[r]=e.defaultProps[r]);return w(e,o,n,i,null)}function w(e,t,a,n,i){var r={type:e,props:t,key:a,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++c:i,__i:-1,__u:0};return null==i&&null!=l.vnode&&l.vnode(r),r}function k(e){return e.children}function D(e,t){this.props=e,this.context=t}function x(e,t){if(null==t)return e.__?x(e.__,e.__i+1):null;for(var a;t<e.__k.length;t++)if(null!=(a=e.__k[t])&&null!=a.__e)return a.__e;return"function"==typeof e.type?x(e):null}function C(e){(!e.__d&&(e.__d=!0)&&u.push(e)&&!E.__r++||_!==l.debounceRendering)&&((_=l.debounceRendering)||h)(E)}function E(){var e,t,a,n,i,r,o,s,c;for(u.sort(d);e=u.shift();)e.__d&&(t=u.length,n=void 0,r=(i=(a=e).__v).__e,s=[],c=[],(o=a.__P)&&((n=b({},i)).__v=i.__v+1,l.vnode&&l.vnode(n),U(o,n,i,a.__n,void 0!==o.ownerSVGElement,32&i.__u?[r]:null,s,null==r?x(i):r,!!(32&i.__u),c),n.__.__k[n.__i]=n,L(s,n,c),n.__e!=r&&function e(t){var a,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,a=0;a<t.__k.length;a++)if(null!=(n=t.__k[a])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(n)),u.length>t&&u.sort(d));E.__r=0}function S(e,t,a,n,i,r,o,s,l,c,u){var _,h,d,m,b,v=n&&n.__k||f,y=t.length;for(a.__d=l,function(e,t,a){var n,i,r,o,s,l=t.length,c=a.length,u=c,_=0;for(e.__k=[],n=0;n<l;n++)null!=(i=e.__k[n]=null==(i=t[n])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?w(null,i,null,null,i):g(i)?w(k,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?w(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,s=function(e,t,a,n){var i=e.key,r=e.type,o=a-1,s=a+1,l=t[a];if(null===l||l&&i==l.key&&r===l.type)return a;if(n>(null!=l&&0==(131072&l.__u)?1:0))for(;o>=0||s<t.length;){if(o>=0){if((l=t[o])&&0==(131072&l.__u)&&i==l.key&&r===l.type)return o;o--}if(s<t.length){if((l=t[s])&&0==(131072&l.__u)&&i==l.key&&r===l.type)return s;s++}}return -1}(i,a,o=n+_,u),i.__i=s,r=null,-1!==s&&(u--,(r=a[s])&&(r.__u|=131072)),null==r||null===r.__v?(-1==s&&_--,"function"!=typeof i.type&&(i.__u|=65536)):s!==o&&(s===o+1?_++:s>o?u>l-o?_+=s-o:_--:_=s<o&&s==o-1?s-o:0,s!==n+_&&(i.__u|=65536))):(r=a[n])&&null==r.key&&r.__e&&(r.__e==e.__d&&(e.__d=x(r)),z(r,r,!1),a[n]=null,u--);if(u)for(n=0;n<c;n++)null!=(r=a[n])&&0==(131072&r.__u)&&(r.__e==e.__d&&(e.__d=x(r)),z(r,r))}(a,t,v),l=a.__d,_=0;_<y;_++)null!=(d=a.__k[_])&&"boolean"!=typeof d&&"function"!=typeof d&&(h=-1===d.__i?p:v[d.__i]||p,d.__i=_,U(e,d,h,i,r,o,s,l,c,u),m=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&P(h.ref,null,d),u.push(d.ref,d.__c||m,d)),null==b&&null!=m&&(b=m),65536&d.__u||h.__k===d.__k?l=function e(t,a,n){var i,r;if("function"==typeof t.type){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,a=e(i[r],a,n));return a}return t.__e!=a&&(n.insertBefore(t.__e,a||null),a=t.__e),a&&a.nextSibling}(d,l,e):"function"==typeof d.type&&void 0!==d.__d?l=d.__d:m&&(l=m.nextSibling),d.__d=void 0,d.__u&=-196609);a.__d=l,a.__e=b}function N(e,t,a){"-"===t[0]?e.setProperty(t,null==a?"":a):e[t]=null==a?"":"number"!=typeof a||m.test(t)?a:a+"px"}function T(e,t,a,n,i){var r;e:if("style"===t){if("string"==typeof a)e.style.cssText=a;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)a&&t in a||N(e.style,t,"");if(a)for(t in a)n&&a[t]===n[t]||N(e.style,t,a[t])}}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase() in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=a,a?n?a.u=n.u:(a.u=Date.now(),e.addEventListener(t,r?A:I,r)):e.removeEventListener(t,r?A:I,r);else{if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==a?"":a;break e}catch(e){}"function"==typeof a||(null==a||!1===a&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,a))}}function I(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(l.event?l.event(e):e)}function A(e){return this.l[e.type+!0](l.event?l.event(e):e)}function U(e,t,a,n,i,r,o,c,u,_){var h,d,f,m,y,w,C,E,N,I,A,U,L,P,z,H=t.type;if(void 0!==t.constructor)return null;128&a.__u&&(u=!!(32&a.__u),r=[c=t.__e=a.__e]),(h=l.__b)&&h(t);e:if("function"==typeof H)try{if(E=t.props,N=(h=H.contextType)&&n[h.__c],I=h?N?N.props.value:h.__:n,a.__c?C=(d=t.__c=a.__c).__=d.__E:("prototype"in H&&H.prototype.render?t.__c=d=new H(E,I):(t.__c=d=new D(E,I),d.constructor=H,d.render=O),N&&N.sub(d),d.props=E,d.state||(d.state={}),d.context=I,d.__n=n,f=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=H.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=b({},d.__s)),b(d.__s,H.getDerivedStateFromProps(E,d.__s))),m=d.props,y=d.state,d.__v=t,f)null==H.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==H.getDerivedStateFromProps&&E!==m&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(E,I),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(E,d.__s,I)||t.__v===a.__v)){for(t.__v!==a.__v&&(d.props=E,d.state=d.__s,d.__d=!1),t.__e=a.__e,t.__k=a.__k,t.__k.forEach(function(e){e&&(e.__=t)}),A=0;A<d._sb.length;A++)d.__h.push(d._sb[A]);d._sb=[],d.__h.length&&o.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(E,d.__s,I),null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(m,y,w)})}if(d.context=I,d.props=E,d.__P=e,d.__e=!1,U=l.__r,L=0,"prototype"in H&&H.prototype.render){for(d.state=d.__s,d.__d=!1,U&&U(t),h=d.render(d.props,d.state,d.context),P=0;P<d._sb.length;P++)d.__h.push(d._sb[P]);d._sb=[]}else do d.__d=!1,U&&U(t),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++L<25)d.state=d.__s,null!=d.getChildContext&&(n=b(b({},n),d.getChildContext())),f||null==d.getSnapshotBeforeUpdate||(w=d.getSnapshotBeforeUpdate(m,y)),S(e,g(z=null!=h&&h.type===k&&null==h.key?h.props.children:h)?z:[z],t,a,n,i,r,o,c,u,_),d.base=t.__e,t.__u&=-161,d.__h.length&&o.push(d),C&&(d.__E=d.__=null)}catch(e){t.__v=null,u||null!=r?(t.__e=c,t.__u|=u?160:32,r[r.indexOf(c)]=null):(t.__e=a.__e,t.__k=a.__k),l.__e(e,t,a)}else null==r&&t.__v===a.__v?(t.__k=a.__k,t.__e=a.__e):t.__e=function(e,t,a,n,i,r,o,l,c){var u,_,h,d,f,m,b,y=a.props,w=t.props,k=t.type;if("svg"===k&&(i=!0),null!=r){for(u=0;u<r.length;u++)if((f=r[u])&&"setAttribute"in f==!!k&&(k?f.localName===k:3===f.nodeType)){e=f,r[u]=null;break}}if(null==e){if(null===k)return document.createTextNode(w);e=i?document.createElementNS("http://www.w3.org/2000/svg",k):document.createElement(k,w.is&&w),r=null,l=!1}if(null===k)y===w||l&&e.data===w||(e.data=w);else{if(r=r&&s.call(e.childNodes),y=a.props||p,!l&&null!=r)for(y={},u=0;u<e.attributes.length;u++)y[(f=e.attributes[u]).name]=f.value;for(u in y)f=y[u],"children"==u||("dangerouslySetInnerHTML"==u?h=f:"key"===u||u in w||T(e,u,null,f,i));for(u in w)f=w[u],"children"==u?d=f:"dangerouslySetInnerHTML"==u?_=f:"value"==u?m=f:"checked"==u?b=f:"key"===u||l&&"function"!=typeof f||y[u]===f||T(e,u,f,y[u],i);if(_)l||h&&(_.__html===h.__html||_.__html===e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(h&&(e.innerHTML=""),S(e,g(d)?d:[d],t,a,n,i&&"foreignObject"!==k,r,o,r?r[0]:a.__k&&x(a,0),l,c),null!=r)for(u=r.length;u--;)null!=r[u]&&v(r[u]);l||(u="value",void 0===m||m===e[u]&&("progress"!==k||m)&&("option"!==k||m===y[u])||T(e,u,m,y[u],!1),u="checked",void 0!==b&&b!==e[u]&&T(e,u,b,y[u],!1))}return e}(a.__e,t,a,n,i,r,o,u,_);(h=l.diffed)&&h(t)}function L(e,t,a){t.__d=void 0;for(var n=0;n<a.length;n++)P(a[n],a[++n],a[++n]);l.__c&&l.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){l.__e(e,t.__v)}})}function P(e,t,a){try{"function"==typeof e?e(t):e.current=t}catch(e){l.__e(e,a)}}function z(e,t,a){var n,i;if(l.unmount&&l.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||P(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){l.__e(e,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&z(n[i],t,a||"function"!=typeof e.type);a||null==e.__e||v(e.__e),e.__=e.__e=e.__d=void 0}function O(e,t,a){return this.constructor(e,a)}s=f.slice,l={__e:function(e,t,a,n){for(var i,r,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},c=0,D.prototype.setState=function(e,t){var a;a=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=b({},this.state),"function"==typeof e&&(e=e(b({},a),this.props)),e&&b(a,e),null!=e&&this.__v&&(t&&this._sb.push(t),C(this))},D.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),C(this))},D.prototype.render=k,u=[],h="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,d=function(e,t){return e.__v.__b-t.__v.__b},E.__r=0;const H=Object.freeze({INACTIVE:Symbol("inactive"),CONNECTING:Symbol("connecting"),CONNECTED:Symbol("connected")});class F extends Event{state;constructor(e){super("state"),this.state=e}}class j extends Event{data;constructor(e){super("message"),this.data=e}}class $ extends EventTarget{connection;#e=H.INACTIVE;#t;constructor(e){super(),this.connection=this.#a(e)}get state(){return this.#e}set state(e){this.#e!=e&&(this.#e=e,this.dispatchEvent(new F(e)))}get channel(){return this.#t}set channel(e){this.#t&&this.#t.close(),this.#t=e,this.#t.addEventListener("open",this.#n),this.#t.addEventListener("close",this.#n),this.#t.addEventListener("closing",this.#n),this.#t.addEventListener("error",this.#n),this.#t.addEventListener("message",e=>this.dispatchEvent(new j(e.data)))}sendMessage(e){return!!this.#t&&"open"===this.#t.readyState&&(this.#t.send(e),!0)}close(){this.#t&&this.#t.close(),this.connection.close()}async recreate(){this.close();let e=await this.connection.getConfiguration();this.connection=this.#a(e)}#a(e){let t=new RTCPeerConnection(e);return t.addEventListener("connectionstatechange",()=>{console.log(`Connection state: ${event.target.connectionState}`),this.#n()}),t.addEventListener("icegatheringstatechange",()=>{console.log(`ICE state: ${event.target.iceGatheringState}`)}),t.addEventListener("datachannel",this.#n),t.onsignalingstatechange=async e=>{console.log(`Signal state: ${e.target.signalingState}`)},t}#i(){switch(this.connection.connectionState){case"closed":case"new":case"disconnected":case"failed":return H.INACTIVE;case"connected":if(this.#t&&"open"===this.#t.readyState)return H.CONNECTED;return H.CONNECTING;case"connecting":return H.CONNECTING}}#n=()=>{this.state=this.#i()}}class q extends ${id;#r=0;#o=!1;#s;constructor(e,t){super(e),this.#s=t,this.connection.onnegotiationneeded=async e=>{let t=await e.target.createOffer();await e.target.setLocalDescription(t)},this.connection.onconnectionstatechange=async e=>{"failed"===e.target.connectionState?this.#o&&await this.#l():"connected"===e.target.connectionState&&(this.#o=!0)},this.connection.onicecandidate=async e=>{this.id&&await this.#s.setOffer(this.id,e.target.localDescription.sdp)}}start(e){this.id||(this.id=e,this.#c(),this.#u())}async #l(){this.#o=!1,this.#c();let e=await this.connection.createOffer({iceRestart:!0});await this.connection.setLocalDescription(e)}#c(){this.channel=this.connection.createDataChannel("data",{ordered:!1})}#u=async()=>{if(this.id){if("have-local-offer"===this.connection.signalingState){let e=await this.#s.getAnswer(this.id);e&&e.timestamp>this.#r&&(this.#r=e.timestamp,await this.connection.setRemoteDescription({sdp:e.sdp,type:"answer"}))}setTimeout(this.#u,5e3)}}}class M extends ${id;#s;#_=0;constructor(e,t){super(e),this.#s=t,this.connection.ondatachannel=e=>{this.channel=e.channel},this.connection.onicecandidate=async e=>{this.id&&(await this.#s.setAnswer(this.id,e.target.localDescription.sdp),console.log("sent new answer"))}}async connect(e){this.id||(this.id=e,this.#h())}#h=async()=>{if(this.id){if(this.state!==H.CONNECTED){let e=await this.#s.getOffer(this.id);if(e||(this.#_=0),e&&e.timestamp>this.#_){this.#_=e.timestamp,await this.connection.setRemoteDescription({sdp:e.sdp,type:"offer"});let t=await this.connection.createAnswer();await this.connection.setLocalDescription(t),console.log("got new offer")}}setTimeout(this.#h,5e3)}}}var W,R,V,K,G=0,B=[],J=[],Q=l.__b,X=l.__r,Y=l.diffed,Z=l.__c,ee=l.unmount;function et(e,t){l.__h&&l.__h(R,e,G||t),G=0;var a=R.__H||(R.__H={__:[],__h:[]});return e>=a.__.length&&a.__.push({__V:J}),a.__[e]}function ea(e){return G=1,function(e,t,a){var n=et(W++,2);if(n.t=e,!n.__c&&(n.__=[a?a(t):el(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0],a=n.t(t,e);t!==a&&(n.__N=[a,n.__[1]],n.__c.setState({}))}],n.__c=R,!R.u)){var i=function(e,t,a){if(!n.__c.__H)return!0;var i=n.__c.__H.__.filter(function(e){return e.__c});if(i.every(function(e){return!e.__N}))return!r||r.call(this,e,t,a);var o=!1;return i.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}}),!(!o&&n.__c.props===e)&&(!r||r.call(this,e,t,a))};R.u=!0;var r=R.shouldComponentUpdate,o=R.componentWillUpdate;R.componentWillUpdate=function(e,t,a){if(this.__e){var n=r;r=void 0,i(e,t,a),r=n}o&&o.call(this,e,t,a)},R.shouldComponentUpdate=i}return n.__N||n.__}(el,e)}function en(e,t){var a,n=et(W++,3);!l.__s&&(!(a=n.__H)||a.length!==t.length||t.some(function(e,t){return e!==a[t]}))&&(n.__=e,n.i=t,R.__H.__h.push(n))}function ei(){for(var e;e=B.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(eo),e.__H.__h.forEach(es),e.__H.__h=[]}catch(t){e.__H.__h=[],l.__e(t,e.__v)}}l.__b=function(e){R=null,Q&&Q(e)},l.__r=function(e){X&&X(e),W=0;var t=(R=e.__c).__H;t&&(V===R?(t.__h=[],R.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=J,e.__N=e.i=void 0})):(t.__h.forEach(eo),t.__h.forEach(es),t.__h=[],W=0)),V=R},l.diffed=function(e){Y&&Y(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==B.push(t)&&K===l.requestAnimationFrame||((K=l.requestAnimationFrame)||function(e){var t,a=function(){clearTimeout(n),er&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(a,100);er&&(t=requestAnimationFrame(a))})(ei)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==J&&(e.__=e.__V),e.i=void 0,e.__V=J})),V=R=null},l.__c=function(e,t){t.some(function(e){try{e.__h.forEach(eo),e.__h=e.__h.filter(function(e){return!e.__||es(e)})}catch(a){t.some(function(e){e.__h&&(e.__h=[])}),t=[],l.__e(a,e.__v)}}),Z&&Z(e,t)},l.unmount=function(e){ee&&ee(e);var t,a=e.__c;a&&a.__H&&(a.__H.__.forEach(function(e){try{eo(e)}catch(e){t=e}}),a.__H=void 0,t&&l.__e(t,a.__v))};var er="function"==typeof requestAnimationFrame;function eo(e){var t=R,a=e.__c;"function"==typeof a&&(e.__c=void 0,a()),R=t}function es(e){var t=R;e.__c=e.__(),R=t}function el(e,t){return"function"==typeof t?t(e):t}let ec=[];async function eu(e){if(0===ec.length)try{let t=await fetch(`https://metered.live/api/v1/turn/credentials?apiKey=${e}`);ec=await t.json()}catch(e){ec=[]}return ec}const e_="offer-",eh="answer-";class ed{#d;#p=new Headers;#f=new DOMParser;constructor(e){let t=e.url;if(t.endsWith("/")||(t+="/"),this.#d=new URL(t),e){let{username:t,password:a}=e,n=`Basic ${btoa(`${t}:${a}`)}`;this.#p.append("Authorization",n)}}async getOffer(e){return this.#m(`${e_}${e}`)}async setOffer(e,t){try{await this.#g(`${eh}${e}`)}catch(e){}return this.#b(`${e_}${e}`,t)}async getAnswer(e){return this.#m(`${eh}${e}`)}async setAnswer(e,t){return this.#b(`${eh}${e}`,t)}async listActiveIds(){return await this.#v(),(await this.#y()).filter(({name:e})=>e.startsWith(e_)).sort((e,t)=>{let a=e.timestamp;return t.timestamp-a}).map(({name:e})=>e.replace(e_,""))}async #m(e){let t=new URL(e,this.#d);try{let e=await fetch(t,{headers:this.#p});return{timestamp:new Date(e.headers.get("Last-Modified")).getTime(),sdp:await e.text()}}catch(e){return null}}async #b(e,t){let a=new URL(e,this.#d),n=new Headers(this.#p);n.set("Content-Type","text/plain"),await fetch(a,{method:"PUT",body:t,headers:n})}async #g(e){let t=new URL(e,this.#d);await fetch(t,{method:"DELETE",headers:this.#p})}async #y(){let e=new Headers(this.#p);e.set("Content-Type","text/xml");let t=await fetch(this.#d,{method:"PROPFIND",body:'<?xml version="1.0"?><D:propfind xmlns:D="DAV:"><D:prop><D:resourcetype/><D:getlastmodified/></D:prop></D:propfind>',headers:e}),a=await t.text(),n=this.#f.parseFromString(a,"text/xml"),i=[],r=this.#d.pathname;for(let e of n.getElementsByTagNameNS("DAV:","response")){if(e.querySelector("propstat > prop > resourcetype > collection"))continue;let t=e.querySelector("href").textContent.trim();if(!t.startsWith(r)||(t=t.replace(r,"")).indexOf("/")>-1)continue;let a=e.querySelector("propstat > prop > getlastmodified").textContent.trim();i.push({name:t,timestamp:new Date(a).getTime()})}return i}async #v(){let e=await this.#y(),t=[];for(let{name:a,timestamp:n}of e)(a.startsWith(e_)||a.startsWith(eh))&&Date.now()-n>36e5&&t.push(this.#g(a));await Promise.all(t)}}const ep=["orca","shark","capybara","fox","turtle","fish","dolphin","armadillo","hedgehog","dhole","dog","cat","jaguar","cheetah","leopard","cougar","lion","tapir","anteater","monkey","snake","scorpion","jerboa","opossum","stingray","colobus","euplectes","jay","finch","hawk","beaver","mouse","moose","alligator","salamander","tadpole","astrapia","pug","greyhound","foxhound","bushbaby","aardvark","aardwolf","pangolin","porcupine","genet","springhare","kangaroo","koala","ostrich","dingo","platypus","camel","horse","echidna","wombat","crocodile","whale","narwhal","humpback","marmoset","tucuxi","beluga","porpoise","sparrow","pigeon","owl","hummingbird","robin","starling","manakin","warbler","penguin","snowfinch","broadbill","thrush","bishop","swallow","bittern","caracara","manx","possum","lemur","deer","peacock","ratfish","vulture","rat","takaya","skunk","tuxedo","turkey","elephant","civet","ainu","husky","akita","alpaca","spaniel","terrier","hare","auroch","axolotl","bandicoot","beagle","beago","collie","tiger","liger","rhino","bobcat","corgi","dachshund","giraffe","bonobo","cetacean","bear","hyena","burmese","caracal","goat","chameleon","chihuahua","chimp","cow","cuscus","pinscher","dunker","mau","ermine","feist","spitz","squirrel","gerbil","hamster","panda","gibbon","flyingfox","jackal","macaque","kinkajou","lynx","manatee","mole","ocelot","otter","panther","pig","prairiedog","puma","hippo","quokka","quoll","bunny","raccoon","tamarin","reindeer","hyrax","saiga","sable","serval","spanador","springbok","tuatara","dropbear","vaquita","wallaby","walrus","weasel","wolf","zebra","zonkey","donkey","mule","zebu","cuttlefish","unicorn","meerkat","jackalope","heron","fawn","warthog","drake","badger","zapus","yak","werewolf","tahr","fossa","xerus","centaur","raptor","long","sheep","quetzal","wildebeest","motmot","coati","drongo","boston","myth","saga","fable","folk","fairy","hound","risk","coin","tyrannosaurus","velociraptor","siren","mudpuppy","ferret","roborovski","bee","dragon","bearded","beardie","pogona","chicken","hen","rooster","quail","grouse","comet","halley","hale","bopp","sungrazing","sungrazer","exocomet","hartley","borrelly","wild","ison","encke","atlas","hyakutake","tempel","west","osiris","basilisk","ctesias","equalacorn","wyvern","hippogriff","hippogryph","griffin","hydra","chimera","phoenix","faun","minotaur","amarok","gorgon","cerberus","orthrus","sphinx","ladon","pegasus","scylla","mermaid","nessie","hippocampus","warg","fenrir","typhon","wampus","bicorn","manticore","qilin","fluffy","bun","mercat","coyote","alpine","lamancha","angora","beetal","girgentana","jamnapari","kamori","kiko","oberhasli","pygmy","pygora","rove","saanen","bilberry","adal","alai","afrino","alpines","ancon","blue","boreray","border","cheviot","churra","cormo","dolly","dala","dorper","dohne","gute","han","jacob","kooka","latxa","lleyn","lonk","merino","nilgiri","orkhon","rya","soay","xalda","ewe","lamb","great","emperor","king","adelie","chinstrap","gentoo","little","banded","magellanic","humboldt","crested","fiordland","snares","rockhopper","royal","macaroni","bison","buffalo","gaur","saola","anoa","banteng","beefalo","yakalo","yattle","tigon","jaglion","leopon","savannah","toyger","cheetoh","grolar","zebroid","coywolf","wholphin","narluga","cama","dzo","zubron","geep","hinny","mulard","zeedonk","zorse","pumapard","pizzly","coydog","whydah","pheasant","lyrebird","peafowl","tayra","zorilla","mara","galago","tenrec","bettong","tamandua","cusimanse","polecat","degu","coatimundi","diplodocus","stegosaurus","zuul","allosaurus","baryonyx","edmontosaurus","iguanodon","minmi","triceratops","troodon","trex","shetland","pinto","appaloosa","auxois","shire","brumby","fell","java","pony","welara","mammoth","burro","poitou","spotted","snowy","barn","barred","boreal","elf","barking","buru","chaco","chestnut","cinnebar","cloudforest","dusky","tawny","berylline","calliope","rufous","xantu","violetear","mango","bumblebee","emerald","cinnamon","golden","pumpkinseed","ruffe","walleye","perch","bowfin","burbot","goldeye","mooneye","dace","quillback","stonecat","albacore","alewife","amberjack","sole","codlet","char","searobin","arowana","bonito","saury","ayu","silverside","banjo","barb","barbel","bangus","batfish","danio","betta","bigeye","bicolor","bitterling","bleak","blenny","tuna","boga","duck","brill","brotula","buri","goby","catla","chimaera","cobia","coho","dab","darter","discus","duckbill","drum","elver","featherback","garibaldi","ghost","ghoul","goblin","dojo","hake","halfmoon","halfbeak","hamlet","halibut","halosaur","hoki","huchen","ide","inanga","ilish","inconnu","dory","koi","kanyu","kokanee","lenok","ling","mahi","marlin","mora","morray","mulley","stargazer","nase","neon","daggertooth","noodlefish","notothen","tetra","orfe","opah","opaleye","pancake","panga","paradise","parore","piarucu","pirate","platy","pleco","powan","pompano","sparidae","porgy","rohu","rudd","skate","squeaker","tailor","uaru","vimba","wahoo","coelacanth","llama","shrimp","prawn","lobster","chipmunk","tails","talpidae","shrew","talpa","mogera","scaptonyx","dymecodon","neurotrichini","uropsilus","desmana","fynbos","panthera","onca","pardus","leo","snow","tigris","clouded","neofelis","nebulosa","felis","acinonyx","eland","oryx","gemsbok","gazella","nyala","kudu","giraffa","raven","corvus","mellori","bat","sapsucker","woodpecker","nuthatch","flicker","junco","anaconda","binturong","boa","brolga","cassowary","cockatoo","cormorant","curlew","dove","eagle","emu","kingfisher","falcon","gila","monster","goose","magpie","guineafowl","ibis","iguana","kite","lorikeet","macaw","monitor","parrot","pitta","python","rhinoceros","skink","stork","tortoise"],ef=["lizard","crocodile","snake","dragon","catfish","bass","salmon","tuna","hammerhead","eel","carp","trout","mahi","snapper","bluegill","sole","cod","triceratops","edmontosaurus","saurolophus","liberty","justice","pangolin","turtle","tortoise","alligator","butterfly","iguana","pineapplefish","pinecone","anaconda","puffin","cardassian","cloud","nominal","ordinal","interval","ratio","vernier","lime","scala","boa","cobra","richter","kelvin","celsius","decibel","beaufort","mohs","pauling","python","mamba","alkaline","climb","moth","eagle","woodpecker","morpho","tautara","anoles","theropod","owl","frog","lionfish","morray","clownfish","ostrich","stork","egret","map","grue","tiyanki","broadnose","basking","goblin","porbeagle","chuckwalla","tawny","bramble","kitefin","agama","komodo","bull","monitor","chameleon","tegus","gecko","micro","gray","allosaurus","glyptodon","basilisk","cordylus","tegu","sailfin","mountain","dinosaur","goanna","herring","minnow","perch","coho","lake","arctic","pumpkinseed","gopher","chickadee","toad","shark","roach","tyrannosaurus","velociraptor","bee","bearded","beardie","pogona","chicken","hen","rooster","quail","grouse","universe","galaxy","atlas","wyvern","hydra","gorgon","chimera","ladon","scylla","mermaid","nessie","hippocampus","typhon","qilin","acoustic","alpha","altered","augmented","bebop","beta","blues","bushi","byzantine","chromatic","delta","diatonic","diminished","dominant","dorian","enigmatic","freygish","gamma","harmonic","heptatonic","hexatonic","hirajoshi","in","insen","istrian","iwato","jazz","locrian","major","minor","mixolydian","musical","octatonic","pentatonic","phrygian","pierce","prometheus","pythagorean","symmetric","tet","tone","tritone","yo","beaver","hops","salak","mercat","great","emperor","adelie","chinstrap","gentoo","little","banded","magellanic","humboldt","crested","fiordland","snares","rockhopper","royal","macaroni","vibe","vibes","banana","ulmer","bortle","palermo","torino","forel","ule","pyruvate","kardashev","ionian","aeolian","sunfish","gar","pike","muskellunge","pickerel","ruffe","walleye","bowfin","burbot","goldeye","mooneye","dace","quillback","stonecat","albacore","alewife","amberjack","codlet","char","searobin","arowana","bonito","saury","ayu","silverside","banjo","barb","barbel","bangus","banfish","ray","danio","betta","bigeye","bicolor","bitterling","bleak","blenny","boga","duck","brill","brotula","buri","goby","catla","chimaera","cobia","dab","darter","discus","duckbill","drum","elver","featherback","garibaldi","ghost","ghoul","dojo","hake","halfmoon","halfbeak","hamlet","halibut","halosaur","hoki","huchen","ide","inanga","ilish","inconnu","dory","koi","kanyu","kokanue","lenok","ling","manta","marlin","mora","mulley","stargazer","nase","neon","daggertooth","noodlefish","notothen","tetra","orfe","opah","opaleye","pancake","panga","paradise","parore","pirarucu","pirate","platy","pleco","powan","pomano","paridae","porgy","rohu","rudd","skate","squeaker","tailor","uaru","vimba","wahoo","zebra","coelacanth","gila","monster","sun","cirius","canopus","arcturus","vega","capella","rigel","procyon","achernar","betelgeuse","hadar","altair","acrux","aldebaran","antares","spica","pollux","fomalhaut","deneb","mimosa","regulus","adhara","shaula","castor","gacrux","bellatrix","elnath","miaplacidus","alnilam","alnair","alnitak","alioth","dubhe","mirfak","wezen","sargas","avior","alkaid","menkalinan","atria","alhena","peacock","alsephina","mirzam","alphard","polaris","hamal","algieba","diphda","mizar","nunki","menkent","mirach","alpheratz","kochab","saiph","denebola","algol","tiaki","mintaka","draconis","centauri","becrux","godzilla","sirius","vector"],em=new class{#w;set webDavUrl(e){this.#w.webDavUrl=e,this.#k()}get webDavUrl(){return this.#D(),this.#w.webDavUrl}set webDavUsername(e){this.#w.webDavUsername=e,this.#k()}get webDavUsername(){return this.#D(),this.#w.webDavUsername}set webDavPassword(e){this.#w.webDavPassword=e,this.#k()}get webDavPassword(){return this.#D(),this.#w.webDavPassword}set deviceId(e){this.#w.deviceId=e,this.#k()}get deviceId(){return this.#D(),this.#w.deviceId}set meteredApiKey(e){this.#w.meteredApiKey=e,this.#k()}get meteredApiKey(){return this.#D(),this.#w.meteredApiKey}get webDavCreds(){return this.#D(),{url:this.#w.webDavUrl,username:this.#w.webDavUsername,password:this.#w.webDavPassword}}#D(){this.#w=JSON.parse(localStorage.getItem("config")),this.#w||(this.#w={webDavUrl:"",webDavUsername:"",webDavPassword:"",deviceId:function(){let e=Math.floor(Math.random()*ep.length),t=Math.floor(Math.random()*ef.length);return`${ep[e]}-${ef[t]}`}(),meteredApiKey:""},this.#k())}#k(){localStorage.setItem("config",JSON.stringify(this.#w))}};function eg({value:e,onChange:t,disabled:a}){let n="";return(e=e.trim()).match(/^https?:/)&&(n=y("a",{href:e,target:"_blank"},"Open link")),y("div",null,y("div",{class:"field"},y("div",{class:"control"},y("textarea",{class:"textarea is-medium",value:e,onInput:e=>t(e.currentTarget.value),disabled:a}))),n)}function eb({iceServers:e}){let t=new ed(em.webDavCreds),a=em.deviceId,[n,i]=ea(H.INACTIVE),[r,o]=ea(""),[s,l]=ea(null);return en(()=>{let n=new q({iceServers:e},t);return n.addEventListener("message",({data:e})=>{o(e)}),n.addEventListener("state",e=>{i(e.state)}),n.start(a),l(n),()=>{n.close()}},[a]),y(eg,{value:r,onChange:e=>{o(e),s.sendMessage(e)},disabled:n!==H.CONNECTED})}function ev({id:e,iceServers:t}){let a=new ed(em.webDavCreds),[n,i]=ea(H.INACTIVE),[r,o]=ea(""),[s,l]=ea(null);return en(()=>{let n=new M({iceServers:t},a);return n.addEventListener("message",({data:e})=>{o(e)}),n.addEventListener("state",e=>{i(e.state)}),n.connect(e),l(n),()=>{n.close()}},[e]),y(eg,{value:r,onChange:e=>{o(e),s.sendMessage(e)},disabled:n!==H.CONNECTED})}function ey({iceServers:e}){let t=new ed(em.webDavCreds),[a,n]=ea(""),[i,r]=ea([]);en(()=>{let e=async()=>{r(await t.listActiveIds())};e();let a=setInterval(e,5e3);return()=>{clearInterval(a)}},[]);let o=i.map(e=>y("button",{class:"button is-rounded"+(e===a?" is-primary":""),onClick:()=>{n(e)}},e)),s="";return a&&(s=y(ev,{id:a,iceServers:e})),y("div",null,y("div",{class:"buttons"},o),s)}function ew({isOpen:e,onClose:t}){return y("div",null,y("div",{class:"field"},y("label",{class:"label"},"WebDav URL"),y("div",{class:"control"},y("input",{class:"input",type:"url",placeholder:"https://webdav.example/folder",value:em.webDavUrl,onInput:e=>{em.webDavUrl=e.currentTarget.value}}))),y("div",{class:"field"},y("label",{class:"label"},"WebDav username"),y("div",{class:"control"},y("input",{class:"input",type:"text",value:em.webDavUsername,onInput:e=>{em.webDavUsername=e.currentTarget.value}}))),y("div",{class:"field"},y("label",{class:"label"},"WebDav password"),y("div",{class:"control"},y("input",{class:"input",type:"password",value:em.webDavPassword,onInput:e=>{em.webDavPassword=e.currentTarget.value}}))),y("div",{class:"field"},y("label",{class:"label"},"Device name"),y("div",{class:"control"},y("input",{class:"input",type:"text",value:em.deviceId,onInput:e=>{em.deviceId=e.currentTarget.value}}))),y("div",{class:"field"},y("label",{class:"label"},"metered.ca API key"),y("div",{class:"control"},y("input",{class:"input",type:"text",value:em.meteredApiKey,onInput:e=>{em.meteredApiKey=e.currentTarget.value}}))))}function ek({active:e,onTabClick:t}){return y("div",{class:"tabs is-centered is-boxed is-medium"},y("ul",null,y("li",{class:"client"!==e&&"server"!==e?"is-active":""},y("a",{onClick:()=>t("config")},y("span",{class:"icon is-small"},y("i",{class:"fas fa-image","aria-hidden":"true"})),y("span",null,"Config"))),y("li",{class:"server"===e?"is-active":""},y("a",{onClick:()=>t("server")},y("span",{class:"icon is-small"},y("i",{class:"fas fa-music","aria-hidden":"true"})),y("span",null,"Server"))),y("li",{class:"client"===e?"is-active":""},y("a",{onClick:()=>t("client")},y("span",{class:"icon is-small"},y("i",{class:"fas fa-film","aria-hidden":"true"})),y("span",null,"Client")))))}e=y(function(){let[e,t]=ea(location.hash.replace("#","")),[a,n]=ea();en(async()=>{n(await eu(em.meteredApiKey))},[]),en(()=>{let e=()=>{t(location.hash.replace("#",""))};return addEventListener("hashchange",e),addEventListener("popstate",e),()=>{removeEventListener("hashchange",e),removeEventListener("popstate",e)}},[]);let i=y(ew,null);return"server"===e?i=y(eb,{iceServers:a}):"client"===e&&(i=y(ey,{iceServers:a})),y("div",{class:"container"},y("div",{class:"box"},y(ek,{active:e,onTabClick:e=>{history.pushState(null,null,"#"+e),t(e)}}),i))},null),t=document.body,l.__&&l.__(e,t),i=(n="function"==typeof a)?null:a&&a.__k||t.__k,r=[],o=[],U(t,e=(!n&&a||t).__k=y(k,null,[e]),i||p,p,void 0!==t.ownerSVGElement,!n&&a?[a]:i?null:t.firstChild?s.call(t.childNodes):null,r,!n&&a?a:i?i.__e:t.firstChild,n,o),L(r,e,o);
//# sourceMappingURL=index.271f8523.js.map
